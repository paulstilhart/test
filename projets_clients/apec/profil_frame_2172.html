<!doctype html>
<html lang="fr">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- CSS -->
  <link rel="stylesheet" href="./sass/base/global.css">
  <link rel="stylesheet" href="./sass/base/template.css">
  <link rel="stylesheet" href="./sass/profil.css">


  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <title>Frame 2172</title>
</head>

<body>
  <!-- a ne pas intégrer, pour simuler en local -->
  <div class="bandeau_top" style="width: 100%;height: 200px;background-color: #232558;margin-bottom: -72.5px;"></div>
  <div class="wrapper_1150" style="margin: auto;max-width: 1150px;">

    <main role="main" class="p-0">
      <div class="container">
        <div class="row">
          <!-- DEBUT CODE A RECUPERER -->
          <div class="wish_profil js_wish_profil card col-xl-9 col-lg-9">

            <div class="pagination_box">
              <a href="#"></a>
              <a class="active" href="#"></a>
              <a href="#"></a>
            </div>

            <h1>Vos souhaits professionnels</h1>
            <p>Les champs comportant un astérisque (*) sont obligatoires</p>

            <div class="wrapper">

              <p class="position_box">Vous recherchez le poste :&ensp;<span>Coordinatrice en évolution
                  professionnelle</span></p>

              <div class="salary_box">
                <p>Salaire minimal (brut annuel K€) * </p>
                <input max="999" type="number" placeholder="Ex. : 36" id="minimum_salary">
                <div>
                  <input type="checkbox" id="minimum_salary_hide" name="minimum_salary_hide"
                    value="minimum_salary_hide" />
                  <label for="minimum_salary_hide">Je veux masquer au recruteur mon souhait salarial</label>
                </div>
              </div>

              <div class="job_box js_job_box">
                <p>Les métiers les plus représentatifs du poste souhaité *<button data-help="js_job_box_help"
                    class="help_trigger js_help_trigger">?</button></p>
                <p>Nous vous proposons ces métiers par rapport au poste que vous recherchez.</p>

                <div>

                  <div class="js_job_box_items">
                    <p title="Auditeur externe"><span>Auditeur externe</span></p>
                    <p title="Responsable de la relation clients"><span>Responsable de la relation clients</span></p>
                    <p title="Architecte BTP"><span>Architecte BTP</span></p>
                    <p title="Ingénieur d’études réseaux et communications"><span>Ingénieur d’études réseaux et
                        communications</span></p>
                    <p title="Architecte naval"><span>Architecte naval</span></p>
                    <p title="Chef de projet travaux"><span>Chef de projet travaux</span></p>
                  </div>

                  <p class="js_job_box_warning_maximum">Nombre de métiers maximum atteint</p>
                  <p class="active js_job_box_suggestions">Obtenez plus de suggestions en renseignant un intitulé dans
                    le champ
                    ci-dessous</p>
                  <p class="js_job_box_no_suggestions">Aucune suggestion ne correspond au poste que vous avez
                    saisi. Saisissez un intitulé
                    dans
                    le champ ci-dessous et choisissez le(s) métier(s) proposé(s)</p>
                  <input class="js_job_box_warning_maximum" maxlength="50" type="text"
                    placeholder="Saisissez un intitulé de poste" id="adress">
                </div>

              </div>

              <div class="sector_box js_sector_box">
                <p>Un ou des secteurs que vous souhaitez (5 max) *<button data-help="js_sector_box_help"
                    class="help_trigger js_help_trigger">?</button></p>
                <p>Nous vous proposons ces secteurs par rapport à ceux qui recrutent le plus en ce moment.</p>
                <div>
                  <div class="js_sector_box_items">
                    <p><span>Banque et assurances</span></p>
                    <p><span>Immobilier</span></p>
                    <p><span>Conseil et gestion des entreprises</span></p>
                    <p><span>Télécommunications</span></p>
                    <p><span>Construction</span></p>
                    <p><span>Construction</span></p>
                    <p><span>Activités des organisation associatives</span></p>
                    <p><span>Banque et assurances</span></p>
                    <p><span>Immobilier</span></p>
                    <p><span>Conseil et gestion des entreprises</span></p>
                    <p><span>Ingénierie - R et D</span></p>
                    <p><span>Activités des organisation associatives</span></p>
                    <p><span>Télécommunications</span></p>
                    <p><span>Construction</span></p>
                    <p><span>Activités des organisation associatives</span></p>
                    <p><span>Conseil et gestion des entreprises</span></p>
                    <p><span>Ingénierie - R et D</span></p>
                    <p><span>Télécommunications</span></p>
                    <p><span>Construction</span></p>
                    <p><span>Construction</span></p>
                    <p><span>Activités des organisation associatives</span></p>
                    <p><span>Banque et assurances</span></p>
                    <p><span>Immobilier</span></p>
                    <p><span>Conseil et gestion des entreprises</span></p>
                    <p><span>Ingénierie - R et D</span></p>
                    <p><span>Activités des organisation associatives</span></p>
                  </div>
                  <p class="js_sector_box_warning_maximum">Nombre de secteurs maximum atteint</p>
                  <button class="js_sector_box_unfold_trigger">Voir plus</button>
                </div>
              </div>


              <div class="location_box">
                <p>Les lieux où vous recherchez un poste *</p>
                <input maxlength="50" type="text" placeholder="Saisissez un pays, une région ou un département"
                  id="adress">
                <div>
                  <p>Boulogne billancourt - 5 km</p>
                  <p>Val-de-Marne (94)</p>
                  <p>Val-de-Marne (94)</p>
                </div>
              </div>

            </div>

            <div class="action_box">
              <div>
                <button class="js_button_start">Précédent</button>
                <p>Etape 2/3</p>
                <button class="js_button_start">Continuer et enregistrer</button>
              </div>
              <button>Reprendre plus tard</button>
            </div>

          </div>

          <div class="wish_profil_help col-xl-3 col-lg-3">
            <div class="card js_job_box_help">
              <h3>Les métiers souhaités</h3>
              <p><em>Saisissez un intitulé ou un mot clé qui soit le plus représentatif de votre métier.
                  Vous pouvez aussi élargir avec d'autres métiers.
                  <br>
                  Vous pourrez constater une différence entre ce que vous avez saisi et l'étiquette affichée. Il s'agit
                  de la correspondance avec les métiers Apec.</em></p>
            </div>
            <div class="card js_sector_box_help">
              <h3>Les secteurs souhaités</h3>
              <p><em>Concentrez-vous sur les secteurs d'activité les plus représentatif de la zone d'emploi sur laquelle
                  vous souhaitez travailler.
                  <br>
                  Ce choix optimise vos opportunités d’être contacté par les recruteurs de ces secteurs.</em>
              </p>
            </div>
          </div>
          <!-- FIN CODE A RECUPERER -->
        </div>
      </div>
    </main>

  </div>



  <!-- DEBUT script JS à récupérer -->
  <script>

    //Pour réguler la longueur d'un input
    function limitInputLength(inputId, maxLength) {
      const inputElement = document.getElementById(inputId);

      if (inputElement) {
        inputElement.addEventListener('input', function () {
          if (this.value.length > maxLength) {
            this.value = this.value.slice(0, maxLength);
          }
        });
      } else {
        console.error(`Element with ID ${inputId} not found.`);
      }
    };


    //si pas de métiers à l'arrivée sur la page
    //Il faut bien ne pas envoyer d'éléments <p> vers le front pour que ce script js fonctionne
    function jobsEmpty(boxClass) {
      const pItems = document.querySelectorAll(`.${boxClass}_items>p`);
      const noSuggestions = document.querySelector(".js_job_box_no_suggestions");
      const suggestions = document.querySelector(".js_job_box_suggestions");

      noSuggestions.classList.toggle("active", pItems.length < 1);
      suggestions.classList.toggle("active", pItems.length >= 1);
    };


    function toggleActiveClassAndCheckMaxJobs(boxClass, maxActiveJobs) {
      const pItems = document.querySelectorAll(`.${boxClass}_items>p`);
      const pWarningMaximum = document.querySelector("p.js_job_box_warning_maximum");
      const inputWarningMaximum = document.querySelector("input.js_job_box_warning_maximum");

      pItems.forEach(item => {
        item.addEventListener('click', () => {
          const pItemsActive = document.querySelectorAll(`.${boxClass}_items>p.active`);

          if (pItemsActive.length === maxActiveJobs && !item.classList.contains("active")) {
            pWarningMaximum.classList.add("active");
            inputWarningMaximum.setAttribute("disabled", "true");
            inputWarningMaximum.placeholder = "Vous avez atteint la limite maximum de cinq métiers.";
            return;
          }
          else {
            pWarningMaximum.classList.remove("active");
            inputWarningMaximum.removeAttribute("disabled");
            inputWarningMaximum.placeholder = "Saisissez un intitulé de poste";
          }

          item.classList.toggle('active');

        });
      });
    };



    function toggleActiveClassAndCheckMaxSectors(boxClass, maxActiveSectors) {
      const pItems = document.querySelectorAll(`.${boxClass}_items>p`);
      const pWarningMaximum = document.querySelector("p.js_sector_box_warning_maximum");

      pItems.forEach(item => {
        item.addEventListener('click', () => {
          const pItemsActive = document.querySelectorAll(`.${boxClass}_items>p.active`);

          if (pItemsActive.length === maxActiveSectors && !item.classList.contains("active")) {
            pWarningMaximum.classList.add("active");
            return;
          }
          else {
            pWarningMaximum.classList.remove("active");
          }

          item.classList.toggle('active');
        });
      });
    };


    function unfoldJobs() {
      const js_sector_box_items = document.querySelector(".js_sector_box_items");
      const js_sector_box_unfold_trigger = document.querySelector(".js_sector_box_unfold_trigger");

      js_sector_box_unfold_trigger.addEventListener("click", function () {
        const js_sector_box_items_height = js_sector_box_items.scrollHeight;

        if (js_sector_box_items.classList.contains('active')) {
          js_sector_box_items.style.maxHeight = "";
          js_sector_box_items.classList.remove('active');
          js_sector_box_unfold_trigger.classList.remove('active');
          js_sector_box_unfold_trigger.textContent = "Voir plus";

        } else {
          js_sector_box_items.style.maxHeight = js_sector_box_items_height + 'px';
          js_sector_box_items.classList.add('active');
          js_sector_box_unfold_trigger.classList.add('active');
          js_sector_box_unfold_trigger.textContent = "Voir moins";
        }
      });
    }


    function distanceBetweenItems(classeElement1, classeElement2) {
      const element1 = document.querySelector(classeElement1);
      const element2 = document.querySelector(classeElement2);

      if (element1 && element2) {
        // Calculer la hauteur entre les deux éléments
        return element2.offsetTop - element1.offsetTop;
      } else {
        console.error(`L'un ou les deux éléments n'ont pas été trouvés : ${classeElement1}, ${classeElement2}`);
        return null;
      }
    }


    function applyTranslateYHelp() {
      const js_job_box_help = document.querySelector('.js_job_box_help');
      const js_sector_box_help = document.querySelector('.js_sector_box_help');

      if (js_job_box_help) {
        translateYValue = distanceBetweenItems(".js_wish_profil", ".js_job_box");
        js_job_box_help.style.top = `${translateYValue}px`;
      }

      if (js_sector_box_help) {
        translateYValue = distanceBetweenItems(".js_wish_profil", ".js_sector_box");
        js_sector_box_help.style.top = `${translateYValue}px`;
      }
    }


    //Que l'on applique à minimum salary
    limitInputLength('minimum_salary', 3);
    jobsEmpty('js_job_box');
    toggleActiveClassAndCheckMaxJobs('js_job_box', 5);
    toggleActiveClassAndCheckMaxSectors('js_sector_box', 5);
    unfoldJobs();
    applyTranslateYHelp();



  </script>
  <!-- FIN script JS à récupérer -->

</body>

</html>